import{c as F,d as zt,f as qt}from"./chunk-WNPWYFNT.js";import{$ as gt,$d as et,A as pt,Bc as At,Ca as A,Cb as wt,D as Y,Da as H,E as N,Ea as bt,Fa as _t,G,Ga as X,Ge as Qt,Hc as St,Hd as Lt,He as rt,I as dt,Ia as Ct,Jc as f,Je as te,K as lt,Kc as kt,L as E,M,Md as B,Me as ee,O as ht,Pc as $,Pd as L,Q as vt,Qa as Mt,Qc as $t,Qd as z,R as ft,Rc as U,Rd as Vt,S as x,Sd as Zt,Tc as Ut,Td as Wt,U as J,Uc as Bt,Vd as Yt,Wa as Ft,Wd as Gt,Xa as q,Yd as tt,Z as mt,Za as Pt,Zd as Jt,_ as d,_a as Ot,_d as Xt,aa as R,ba as l,ce as it,ea as Dt,f as st,fe as nt,g as ct,gc as K,hc as Nt,i as ut,ia as Ht,k as j,kb as h,kc as S,l as _,la as D,me as Kt,n as v,nc as k,qa as yt,qc as Et,rc as xt,sc as Rt,t as at,ua as Tt,ub as jt,v as C,va as It,vc as Q,vd as P,wa as n,x as w,ye as ot}from"./chunk-VIQ542NQ.js";function ae({currentTarget:t,relatedTarget:r}){return!Q(r)||!Q(t)||!t.contains(r)}var y=(()=>{class t extends st{constructor(e,i){super(s=>this.stream$.subscribe(s)),this.el=e,this.zone=i,this.stream$=C(f(this.el.nativeElement,"mouseenter").pipe(v(Nt)),f(this.el.nativeElement,"mouseleave").pipe(v(K)),f(this.el.nativeElement,"mouseout").pipe(w(ae),v(K))).pipe(N(),$(this.zone))}}return t.\u0275fac=function(e){return new(e||t)(J(D),J(A))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),Fe=(()=>{class t{constructor(e){this.tuiHoveredChange=e}}return t.\u0275fac=function(e){return new(e||t)(n(y))},t.\u0275dir=l({type:t,selectors:[["","tuiHoveredChange",""]],outputs:{tuiHoveredChange:"tuiHoveredChange"},features:[h([y])]}),t})(),Pe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=R({type:t}),t.\u0275inj=x({}),t})();var pe=["*"];function de(t,r){if(t&1&&Mt(0,"span",1),t&2){let e=r.polymorpheusOutlet;X("innerHTML",e,yt)}}var le=xt(()=>me),he={direction:"bottom-left",showDelay:500,hideDelay:200,appearance:"",icon:"tuiIconHelpCircle"},O=Et(he);var ci=(()=>{class t extends Lt{constructor(e){super(),this.options=e,this.direction=this.options.direction,this.appearance=this.options.appearance,this.showDelay=this.options.showDelay,this.hideDelay=this.options.hideDelay,this.icon=this.options.icon}}return t.\u0275fac=function(e){return new(e||t)(n(O,4))},t.\u0275dir=l({type:t,selectors:[["","tuiHintContent",""]],inputs:{content:[d.None,"tuiHintContent","content"],direction:[d.None,"tuiHintDirection","direction"],appearance:[d.None,"tuiHintAppearance","appearance"],showDelay:[d.None,"tuiHintShowDelay","showDelay"],hideDelay:[d.None,"tuiHintHideDelay","hideDelay"]},features:[h([{provide:O,useExisting:vt(()=>t)}]),H]}),t})(),ne=(()=>{class t{constructor(e,i,s,c,o){this.el=e,this.component=i,this.hintService=s,this.options=c,this.activeZone=o,this.tuiHintAppearance=null,this.type="hint"}set tuiHint(e){this.content=e,e||this.toggle(!1)}get appearance(){var e;return(e=this.tuiHintAppearance)!==null&&e!==void 0?e:this.options.appearance}ngOnDestroy(){this.toggle(!1)}getClientRect(){return this.el.nativeElement.getBoundingClientRect()}toggle(e){e&&this.content?this.hintService.add(this):this.hintService.remove(this)}}return t.\u0275fac=function(e){return new(e||t)(n(D),n(U),n(Qt),n(O),n(zt,8))},t.\u0275dir=l({type:t,selectors:[["","tuiHint","",5,"ng-container",5,"ng-template"]],inputs:{tuiHint:"tuiHint",context:[d.None,"tuiHintContext","context"],tuiHintAppearance:"tuiHintAppearance"},features:[h([et(t),Zt(t),{provide:U,deps:[le,mt],useClass:U}])]}),t})(),oe=(()=>{class t extends L{constructor(e,i,s,c){super(o=>this.stream$.subscribe(o)),this.hovered$=e,this.options=i,this.el=s,this.parent=c,this.visible=!1,this.toggle$=new ct,this.stream$=C(this.toggle$.pipe(E(o=>_(o).pipe(Y(o?0:this.hideDelay))),M(this.hovered$),G()),this.hovered$.pipe(E(o=>_(o).pipe(Y(o?this.showDelay:this.hideDelay))),M(this.toggle$),G())).pipe(w(()=>this.enabled),v(o=>o&&(this.el.nativeElement.hasAttribute("tuiHintPointer")||!nt(this.el.nativeElement))),ht(o=>{this.visible=o})),this.showDelay=this.options.showDelay,this.hideDelay=this.options.hideDelay,this.type="hint",this.enabled=!0}toggle(e=!this.visible){var i;this.toggle$.next(e),(i=this.parent)===null||i===void 0||i.toggle(e)}}return t.\u0275fac=function(e){return new(e||t)(n(y),n(O),n(D),n(t,12))},t.\u0275dir=l({type:t,selectors:[["","tuiHint","",5,"ng-container",5,"ng-template"]],inputs:{showDelay:[d.None,"tuiHintShowDelay","showDelay"],hideDelay:[d.None,"tuiHintHideDelay","hideDelay"]},exportAs:["tuiHintHover"],features:[h([z(t),y]),H]}),t})(),ve=(()=>{class t extends oe{constructor(){super(...arguments),this.currentRect=S}onMove({clientX:e,clientY:i}){this.currentRect=At(e,i)}getClientRect(){return this.currentRect}}return t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Ht(t)))(i||t)}})(),t.\u0275dir=l({type:t,selectors:[["","tuiHint","","tuiHintPointer",""]],hostBindings:function(e,i){e&1&&q("mousemove.silent",function(c){return i.onMove(c)})},features:[h([et(t),z(t)]),H]}),t})(),m=8,V=22,u=0,a=1,fe=(()=>{class t extends Yt{constructor(e,i,s,c){super(),this.options=e,this.viewport=i,this.directive=s,this.accessors=c,this.points=it.reduce((o,p)=>Object.assign(Object.assign({},o),{[p]:[0,0]}),{}),this.direction=this.options.direction,this.type="hint"}getPosition({width:e,height:i}){var s,c;let o=(c=(s=this.accessor)===null||s===void 0?void 0:s.getClientRect())!==null&&c!==void 0?c:S,p=o.left+o.width/2,g=o.top+o.height/2;if(this.points["top-left"][u]=o.top-i-m,this.points["top-left"][a]=p-e+V,this.points.top[u]=this.points["top-left"][u],this.points.top[a]=p-e/2,this.points["top-right"][u]=this.points["top-left"][u],this.points["top-right"][a]=p-V,this.points["bottom-left"][u]=o.bottom+m,this.points["bottom-left"][a]=this.points["top-left"][a],this.points.bottom[u]=this.points["bottom-left"][u],this.points.bottom[a]=this.points.top[a],this.points["bottom-right"][u]=this.points["bottom-left"][u],this.points["bottom-right"][a]=this.points["top-right"][a],this.points["left-top"][u]=g-i+V,this.points["left-top"][a]=o.left-e-m,this.points.left[u]=g-i/2,this.points.left[a]=this.points["left-top"][a],this.points["left-bottom"][u]=g-V,this.points["left-bottom"][a]=this.points["left-top"][a],this.points["right-top"][u]=this.points["left-top"][u],this.points["right-top"][a]=o.right+m,this.points.right[u]=this.points.left[u],this.points.right[a]=this.points["right-top"][a],this.points["right-bottom"][u]=this.points["left-bottom"][u],this.points["right-bottom"][a]=this.points["right-top"][a],this.checkPosition(this.points[this.direction],e,i))return this.points[this.direction];let T=it.find(I=>this.checkPosition(this.points[I],e,i));return this.points[T||this.fallback]}get accessor(){return Xt("hint")(this.accessors,this.directive)}get fallback(){return this.points.top[u]>this.viewport.getClientRect().bottom-this.points.bottom[u]?"top":"bottom"}checkPosition([e,i],s,c){let o=this.viewport.getClientRect();return e>m/4&&i>m/4&&e+c<o.bottom-m/4&&i+s<o.right-m/4}}return t.\u0275fac=function(e){return new(e||t)(n(O),n(ot),n(ne),n(tt))},t.\u0275dir=l({type:t,selectors:[["","tuiHint","",5,"ng-container",5,"ng-template"]],inputs:{direction:[d.None,"tuiHintDirection","direction"]},features:[H]}),j([B],t.prototype,"accessor",null),t})(),ie=4,me=(()=>{class t{constructor(e,i,s,c,o,p,g,T,I,Z,re,se){var W;this.animation=c,this.pointer=o,this.accessor=p,this.el=g,this.polymorpheus=T,this.hover=I,this.mode=Z,this.vvs=re,this.viewport=se,this.appearance=this.polymorpheus.$implicit.appearance||((W=this.mode)===null||W===void 0?void 0:W.mode),i.pipe(v(b=>this.vvs.correct(b)),M(s)).subscribe(([b,ce])=>{this.update(b,ce)}),e.pipe(M(s)).subscribe(b=>this.hover.toggle(b))}get content(){return this.polymorpheus.$implicit.content}get context(){return this.polymorpheus.$implicit.context}onClick(e){(!e.closest("tui-hint")&&!this.hover.el.nativeElement.contains(e)||nt(this.hover.el.nativeElement))&&this.hover.toggle(!1)}update(e,i){if(!this.hover.el.nativeElement.isConnected){this.hover.toggle(!1);return}let{height:s,width:c}=this.el.nativeElement.getBoundingClientRect(),{style:o}=this.el.nativeElement,p=this.accessor.getClientRect(),g=this.viewport.getClientRect();if(p===S)return;let T=k(i,ie,g.width-c-ie),[I,Z]=this.vvs.correct([p.top+p.height/2-e,p.left+p.width/2-T]);o.top=F(e),o.left=F(T),o.setProperty("--top",F(k(I,.5,s-1))),o.setProperty("--left",F(k(Z,.5,c-1)))}}return t.\u0275fac=function(e){return new(e||t)(n(y),n(rt),n(P,2),n(Kt),n(ve,8),n(tt),n(D),n($t),n(oe),n(ee,8),n(te),n(ot))},t.\u0275cmp=gt({type:t,selectors:[["tui-hint"]],hostVars:4,hostBindings:function(e,i){e&1&&q("click",function(c){return i.onClick(c.target)},!1,Tt),e&2&&(Ft("@tuiFadeIn",i.animation),_t("data-appearance",i.appearance),Ct("_untouchable",i.pointer))},features:[h([P,rt,y,Gt("hint",fe),Jt("hint",ne)])],ngContentSelectors:pe,decls:2,vars:2,consts:[[3,"innerHTML",4,"polymorpheusOutlet","polymorpheusOutletContext"],[3,"innerHTML"]],template:function(e,i){e&1&&(Pt(),Ot(0),bt(1,de,1,1,"span",0)),e&2&&(It(),X("polymorpheusOutlet",i.content)("polymorpheusOutletContext",i.context))},dependencies:[Ut],styles:['[_nghost-%COMP%]{position:absolute;max-width:18rem;min-height:var(--tui-height-m);padding:.75rem 1rem;background:var(--tui-primary);border-radius:var(--tui-radius-l);color:var(--tui-primary-text);box-sizing:border-box;font:var(--tui-font-text-s);white-space:pre-line;word-wrap:break-word;line-height:1.25rem}[_nghost-%COMP%]:before{content:"";position:absolute;top:var(--top);left:var(--left);width:.5rem;height:.5rem;border-radius:.125rem;box-sizing:border-box;background:inherit;transform:translate(-50%,-50%) rotate(45deg)}[data-appearance=error][_nghost-%COMP%]{background:var(--tui-error-fill)}[data-appearance=onDark][_nghost-%COMP%]{background:var(--tui-elevation-02);color:var(--tui-text-01);filter:drop-shadow(0 0 .125rem rgba(0,0,0,.16)) drop-shadow(0 1.5rem 1rem rgba(0,0,0,.03)) drop-shadow(0 .75rem .75rem rgba(0,0,0,.04)) drop-shadow(0 .25rem .375rem rgba(0,0,0,.05))}[_nghost-%COMP%]:not([style*="top"]){visibility:hidden}._untouchable[_nghost-%COMP%]{pointer-events:none}'],data:{animation:[qt]},changeDetection:0}),j([B],t.prototype,"update",null),t})(),ui=(()=>{class t extends L{constructor(e,i,s){super(c=>this.stream$.subscribe(c)),this.zone=e,this.doc=i,this.el=s,this.id$=new ut(1),this.stream$=this.id$.pipe(kt(()=>f(this.doc,"keydown",{capture:!0}),Rt),E(()=>this.focused?_(!1):C(f(this.doc,"keyup"),f(this.element,"blur")).pipe(v(()=>this.focused))),pt(c=>c?at(1e3):_(null)),lt(!1),N(),dt(1),$(this.zone)),this.tuiHintDescribe="",this.type="hint"}ngOnChanges(){this.id$.next(this.tuiHintDescribe)}get focused(){return St(this.element)}get element(){return this.doc.getElementById(this.tuiHintDescribe||"")||this.el.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(n(A),n(jt),n(D))},t.\u0275dir=l({type:t,selectors:[["","tuiHintDescribe",""]],inputs:{tuiHintDescribe:"tuiHintDescribe"},features:[h([z(t)]),H,Dt]}),j([B],t.prototype,"element",null),t})(),ai=(()=>{class t extends Wt{constructor(e,i,s){super(e,i,s),this.type="hint"}}return t.\u0275fac=function(e){return new(e||t)(n(P,2),n(L),n(Vt))},t.\u0275dir=l({type:t,selectors:[["","tuiHint","",5,"ng-container",5,"ng-template"]],features:[h([P]),H]}),t})();var pi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=R({type:t}),t.\u0275inj=x({imports:[[wt,Bt]]}),t})();export{y as a,Fe as b,Pe as c,O as d,ci as e,ne as f,oe as g,ve as h,fe as i,ui as j,ai as k,pi as l};
