import{a as Qt,b as Ce,c as Ie,d as qt,e as Te,f as De,g as Yt,h as Oe,i as Zt,j as Me,k as Xt}from"./chunk-CRHUP7PS.js";import"./chunk-YPJUEPRX.js";import"./chunk-W66C6N3I.js";import{a as B}from"./chunk-FH72FGH4.js";import"./chunk-YPHX7PC4.js";import{a as z}from"./chunk-S77TKC5Z.js";import{a as Kt}from"./chunk-BPDZKKEV.js";import"./chunk-3LROMLBA.js";import{a as k}from"./chunk-TFAWTYLP.js";import{a as ye,b as be}from"./chunk-5TNR2OTO.js";import"./chunk-UEBDUWVO.js";import{d as zt,e as Bt}from"./chunk-WNPWYFNT.js";import{$ as C,$a as q,Ab as Dt,Ae as Wt,Bb as Ot,Bd as qe,Cb as ae,Cd as Ye,Da as w,De as _e,Ea as T,Eb as ue,Ed as At,Fa as je,Fd as jt,Ga as l,Gd as kt,H as ut,Ha as _t,Hc as St,Ia as G,Jc as H,Ka as ke,Kc as Ft,L as b,La as U,Ma as W,Md as Ht,Na as Q,Nb as Mt,O as J,Oa as d,P as lt,Pa as c,Pb as xt,Qa as D,Qb as le,R as dt,Rb as de,S as h,Sb as ce,T as $,Ta as He,Tb as pe,U as Re,Ua as te,Ud as Vt,V as ct,Vb as me,Vc as Et,W as pt,X as mt,Xa as g,Xb as fe,Ya as I,Yb as he,Za as ze,Zb as ve,_a as ie,_b as ge,_c as Nt,a as Je,aa as v,ab as Be,b as et,ba as f,bb as S,cb as F,db as ne,e as tt,eb as O,f as K,fa as P,fb as Ct,ga as L,gb as Y,gc as Ue,h as it,hb as oe,hc as We,ia as ft,ib as re,ja as Ae,jb as se,jc as wt,k as nt,kb as _,l as Le,la as R,lb as A,ma as ht,n as E,nb as Ve,nc as Qe,o as ot,od as Pt,oe as $t,pb as $e,qb as Ge,r as N,rd as Lt,ta as vt,tb as j,u as rt,ua as gt,ud as Rt,v as st,va as a,vb as It,ve as Gt,wa as s,x as at,xb as Tt,xe as Ut,ya as ee,yb as yt,zb as bt}from"./chunk-VIQ542NQ.js";var xe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=f({type:e,selectors:[["","tuiItem",""]]}),e})(),Jt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v({type:e}),e.\u0275inj=h({}),e})();var ei=(()=>{class e{constructor(t){this.tuiPan=t}}return e.\u0275fac=function(t){return new(t||e)(s(qe))},e.\u0275dir=f({type:e,selectors:[["","tuiPan",""]],outputs:{tuiPan:"tuiPan"},features:[_([qe])]}),e})(),ti=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v({type:e}),e.\u0275inj=h({}),e})();var ii=(()=>{class e{constructor(t){this.tuiSwipe=t}}return e.\u0275fac=function(t){return new(t||e)(s(Ye))},e.\u0275dir=f({type:e,selectors:[["","tuiSwipe",""]],outputs:{tuiSwipe:"tuiSwipe"},features:[_([Ye])]}),e})(),ni=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v({type:e}),e.\u0275inj=h({}),e})();var oi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=f({type:e,selectors:[["ng-template","tuiDataList",""]]}),e})();var Ti=new $("Root element for IntersectionObserver"),si="0px 0px 0px 0px",ln=new $("rootMargin for IntersectionObserver",{providedIn:"root",factory:()=>si});function yi(e){return e||si}var ai=0,dn=new $("threshold for IntersectionObserver",{providedIn:"root",factory:()=>ai});function bi(e){return e?.split(",").map(parseFloat)||ai}var Di=typeof IntersectionObserver<"u"?IntersectionObserver:class{constructor(){this.root=null,this.rootMargin="",this.thresholds=[]}observe(){}unobserve(){}disconnect(){}takeRecords(){return[]}},Ze=(()=>{class e extends Di{constructor(t,i,n){super(r=>{this.callbacks.forEach((m,u)=>{let p=r.filter(({target:M})=>M===u);return p.length&&m(p,this)})},{root:t&&t.nativeElement,rootMargin:yi(i),threshold:bi(n)}),this.callbacks=new Map}observe(t,i=()=>{}){super.observe(t),this.callbacks.set(t,i)}unobserve(t){super.unobserve(t),this.callbacks.delete(t)}ngOnDestroy(){this.disconnect()}}return e.\u0275fac=function(t){return new(t||e)(s(Ti,8),Ae("waIntersectionRootMargin"),Ae("waIntersectionThreshold"))},e.\u0275dir=f({type:e,selectors:[["","waIntersectionObserver",""]],exportAs:["IntersectionObserver"],features:[w]}),e})(),ri=(()=>{class e extends K{constructor({nativeElement:t},i){return super(n=>(i.observe(t,r=>{n.next(r)}),()=>{i.unobserve(t)})),this.pipe(ut())}}return e.\u0275fac=function(t){return new(t||e)(Re(R),Re(Ze))},e.\u0275prov=dt({token:e,factory:e.\u0275fac}),e})(),ui=(()=>{class e{constructor(t){this.waIntersectionObservee=t}}return e.\u0275fac=function(t){return new(t||e)(s(ri))},e.\u0275dir=f({type:e,selectors:[["","waIntersectionObservee",""]],outputs:{waIntersectionObservee:"waIntersectionObservee"},features:[_([ri])]}),e})();var li=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v({type:e}),e.\u0275inj=h({}),e})(),cn=new $("Intersection Observer API support",{providedIn:"root",factory:()=>!!ct(Et).IntersectionObserver});var di=Qt({limitWidth:"fixed",align:"right"}),ci={provide:Ut,deps:[[new pt,new mt,Mt]],useFactory:tt};function Mi(e,o){e&1&&He(0)}function xi(e,o){if(e&1){let t=te();d(0,"fieldset",5),g("waIntersectionObservee",function(n){let r=P(t).index,m=I();return L(m.onIntersection(n[0],r))}),He(1,6),c()}if(e&2){let t=o.$implicit,i=o.index,n=I();l("disabled",n.isDisabled(i))("ngStyle",n.getStyle(n.itemsCount)),a(),l("ngTemplateOutlet",t)}}var wi=(()=>{class e{constructor(t){this.el=t,this.tuiCarouselScroll=H(this.el.nativeElement,"wheel").pipe(at(({deltaX:i})=>Math.abs(i)>20),lt(500),E(({deltaX:i})=>Math.sign(i)),J(()=>{this.el.nativeElement.scrollLeft=10}))}}return e.\u0275fac=function(t){return new(t||e)(s(R))},e.\u0275dir=f({type:e,selectors:[["","tuiCarouselScroll",""]],outputs:{tuiCarouselScroll:"tuiCarouselScroll"}}),e})(),Xe=(()=>{class e extends K{constructor(t,i){super(n=>this.output$.subscribe(n)),this.el=t,this.visible$=i,this.duration$=new it(0),this.running$=st(H(this.el.nativeElement,"mouseenter").pipe(E(Ue)),H(this.el.nativeElement,"touchstart").pipe(E(Ue)),H(this.el.nativeElement,"touchend").pipe(E(We)),H(this.el.nativeElement,"mouseleave").pipe(E(We)),this.visible$),this.output$=ot([this.duration$,this.running$]).pipe(Ft(([n])=>rt(n),n=>n.every(Boolean)))}set duration(t){this.duration$.next(t)}set index(t){this.duration$.next(this.duration$.value)}}return e.\u0275fac=function(t){return new(t||e)(s(R),s(Nt))},e.\u0275dir=f({type:e,selectors:[["tui-carousel"]],inputs:{duration:"duration",index:"index"},features:[w]}),e})(),Si=(()=>{class e{constructor(t){this.tuiCarouselAutoscroll=t}}return e.\u0275fac=function(t){return new(t||e)(s(Xe))},e.\u0275dir=f({type:e,selectors:[["","tuiCarouselAutoscroll",""]],outputs:{tuiCarouselAutoscroll:"tuiCarouselAutoscroll"}}),e})(),mi=(()=>{class e{constructor(t,i,n){this.cdr=t,this.el=i,this.isMobile=n,this.translate=0,this.draggable=!1,this.itemsCount=1,this.index=0,this.indexChange=new ht,this.items=wt,this.transitioned=!0}get transform(){return`translateX(${100*(this.transitioned?this.computedTranslate:this.translate)}%)`}onTransitioned(t){this.transitioned=t,t||(this.translate=this.computedTranslate)}getStyle(t){let i=`${100/t}%`;return{flexBasis:i,minWidth:i,maxWidth:i}}next(){this.items&&this.index===this.items.length-this.itemsCount||this.updateIndex(this.index+1)}prev(){this.updateIndex(this.index-1)}isDisabled(t){return t<this.index||t>this.index+this.itemsCount}onIntersection({intersectionRatio:t},i){t&&t>=.5&&!this.transitioned&&this.updateIndex(this.index<i?i-this.itemsCount+1:i)}onScroll(t){this.isMobile||(t>0?this.next():this.prev())}onPan(t){if(!this.computedDraggable)return;let{clientWidth:i}=this.el.nativeElement,n=1-this.items.length/this.itemsCount;this.translate=Qe(t/i+this.translate,n,0)}onSwipe(t){t==="left"?this.next():t==="right"&&this.prev()}onAutoscroll(){this.updateIndex(this.index===this.items.length-1?0:this.index+1)}get computedTranslate(){return-this.index/this.itemsCount}get computedDraggable(){return this.isMobile||this.draggable}updateIndex(t){this.index=Qe(t,0,this.items.length-1),this.indexChange.emit(this.index),this.cdr.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(s(j),s(R),s(Lt))},e.\u0275cmp=C({type:e,selectors:[["tui-carousel"]],contentQueries:function(t,i,n){if(t&1&&q(n,xe,4,ee),t&2){let r;S(r=F())&&(i.items=r)}},hostVars:4,hostBindings:function(t,i){t&1&&g("touchstart",function(){return i.onTransitioned(!1)})("touchend",function(){return i.onTransitioned(!0)})("mousedown",function(){return i.onTransitioned(!1)})("mouseup.silent",function(){return i.onTransitioned(!0)},!1,gt),t&2&&G("_draggable",i.draggable)("_transitioned",i.transitioned)},inputs:{draggable:"draggable",itemsCount:"itemsCount",index:"index"},outputs:{indexChange:"indexChange"},features:[_([{provide:Rt,useValue:{timeout:200,threshold:30}}])],decls:6,vars:6,consts:[[4,"ngIf"],[1,"t-scroller",3,"tuiCarouselScroll"],["waIntersectionObserver","","waIntersectionThreshold","0.5",1,"t-wrapper"],[1,"t-items",3,"tuiCarouselAutoscroll","tuiPan","tuiSwipe"],["class","t-item",3,"disabled","ngStyle","waIntersectionObservee",4,"ngFor","ngForOf"],[1,"t-item",3,"waIntersectionObservee","disabled","ngStyle"],[3,"ngTemplateOutlet"]],template:function(t,i){t&1&&(T(0,Mi,1,0,"ng-container",0),$e(1,"async"),d(2,"div",1),g("tuiCarouselScroll",function(r){return i.onScroll(r)}),d(3,"div",2)(4,"div",3),g("tuiCarouselAutoscroll",function(){return i.onAutoscroll()})("tuiPan",function(r){return i.onPan(r[0])})("tuiSwipe",function(r){return i.onSwipe(r.direction)}),T(5,xi,2,3,"fieldset",4),c()()()),t&2&&(l("ngIf",Ge(1,4,i.items.changes)),a(4),_t("transform",i.transform),a(),l("ngForOf",i.items))},dependencies:[yt,wi,Ze,Si,ei,ii,Tt,bt,ui,Dt,Ot],styles:['[_nghost-%COMP%]{position:relative;display:block;overflow:hidden}._draggable[_nghost-%COMP%]{-webkit-user-select:none;-moz-user-select:none;user-select:none}._draggable[_nghost-%COMP%]:hover{cursor:grab}._draggable[_nghost-%COMP%]:active{cursor:grabbing}.t-items[_ngcontent-%COMP%]{display:flex}._transitioned[_nghost-%COMP%]   .t-items[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:var(--tui-carousel-padding, 0 1.25rem);flex:1;min-width:100%;max-width:100%;box-sizing:border-box;border:none;margin:0}.t-wrapper[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;left:0;right:0;min-width:100%;overflow:hidden}.t-scroller[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;overflow:auto;overscroll-behavior-x:none;touch-action:none}.t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar, .t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{display:none}.t-scroller[_ngcontent-%COMP%]:before, .t-scroller[_ngcontent-%COMP%]:after{content:"";display:block;min-width:1rem}'],changeDetection:0}),nt([Ht],e.prototype,"getStyle",null),e})();var fi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v({type:e}),e.\u0275inj=h({imports:[[ae,li,ti,ni,Jt]]}),e})();var Fi=["*",[["input"]]],Ei=["*","input"],we=(()=>{class e extends jt{constructor(t,i,n,r){super(t,i,r),this.textfieldSize=n,this.open=!1}get size(){return this.textfieldSize.size}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return St(this.nativeFocusableElement)||!!this.hostedDropdown&&this.hostedDropdown.focused}get canOpen(){return this.interactive&&!!this.datalist}onValueChange(t){this.value=t,this.open=!0}onActiveZone(t){this.updateFocused(t)}handleOption(t){this.setNativeValue(String(t)),this.focusInput(),this.value=String(t),this.open=!1}getFallbackValue(){return""}focusInput(t=!1){this.nativeFocusableElement&&this.nativeFocusableElement.focus({preventScroll:t})}setNativeValue(t){this.nativeFocusableElement&&(this.nativeFocusableElement.value=t)}}return e.\u0275fac=function(t){return new(t||e)(s(xt,10),s(j),s(qt),s(At,8))},e.\u0275cmp=C({type:e,selectors:[["tui-input"]],contentQueries:function(t,i,n){if(t&1&&q(n,oi,5,ee),t&2){let r;S(r=F())&&(i.datalist=r.first)}},viewQuery:function(t,i){if(t&1&&(Be(De,5),Be(Oe,5)),t&2){let n;S(n=F())&&(i.hostedDropdown=n.first),S(n=F())&&(i.textfield=n.first)}},hostVars:1,hostBindings:function(t,i){t&2&&je("data-size",i.size)},features:[_([ci,Pt(e),$t(e),kt(e)],[di]),w],ngContentSelectors:Ei,decls:4,vars:11,consts:[[1,"t-hosted",3,"openChange","tuiActiveZoneChange","canOpen","content","open"],["automation-id","tui-input__textfield",1,"t-textfield",3,"valueChange","disabled","focusable","invalid","nativeId","pseudoFocus","pseudoHover","readOnly","value"]],template:function(t,i){t&1&&(ze(Fi),d(0,"tui-hosted-dropdown",0),se("openChange",function(r){return re(i.open,r)||(i.open=r),r}),g("tuiActiveZoneChange",function(r){return i.onActiveZone(r)}),d(1,"tui-primitive-textfield",1),g("valueChange",function(r){return i.onValueChange(r)}),ie(2),ie(3,1,["ngProjectAs","input",5,["input"]]),c()()),t&2&&(l("canOpen",i.canOpen)("content",i.datalist||""),oe("open",i.open),a(),l("disabled",i.computedDisabled)("focusable",i.computedFocusable)("invalid",i.computedInvalid)("nativeId",i.nativeId)("pseudoFocus",i.computedFocused)("pseudoHover",i.pseudoHover)("readOnly",i.readOnly)("value",i.value))},dependencies:[De,Oe,zt,Zt],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),e})(),Se=(()=>{class e extends Vt{onValueChange(t){this.host.onValueChange(t)}}return e.\u0275fac=(()=>{let o;return function(i){return(o||(o=ft(e)))(i||e)}})(),e.\u0275dir=f({type:e,selectors:[["tui-input"]],features:[_([Gt(e)]),w]}),e})(),Fe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v({type:e}),e.\u0275inj=h({imports:[[ae,Bt,Xt,Yt]]}),e})();function Li(e,o){if(e&1&&(d(0,"div")(1,"a",5)(2,"button",6),O(3),c()()()),e&2){let t=o.$implicit;a(),l("routerLink",t.routerLink),a(2),Y(" ",t.name,"")}}var _i=(()=>{let o=class o{constructor(i,n){this.globalLoaderService=i,this.restApi=n,this.filteredItems=[],this.searchForm=new ce({search:new pe("")}),this.timeout=null,this.initialItems=[],this.prevSearchString=""}ngOnInit(){this.initControls(),this.restApi.get("nonRoutedGameChapterConfig",{pathParams:{gameName:this.gameName}}).pipe(b(i=>{let n=i.total,r=Object.values(i.chapters).some(u=>!!u.name),m=[];this.initialItems=new Array(n);for(let u=0;u<n;u++){this.initialItems[u]={};let p,M;i.chapterOrder?(p=i.chapterOrder[u],M=B.resolveChapterName(i,u)):(p=`${u+1}`,M=B.resolveChapterName(i,u+1)),this.initialItems[u].name=M,this.initialItems[u].routerLink=`../chapters/${p}`,m.push(this.restApi.get("nonRoutedChapterFile",{pathParams:{gameName:this.gameName,file:`${p}.txt`},requestOptions:{headers:new ue({Accept:"application/json;charset=utf-8"}),responseType:"text"}}))}return N(m)})).subscribe(i=>{i.forEach((n,r)=>{this.initialItems[r].text=n}),this.filteredItems=this.initialItems,this.globalLoaderService.setGlobalLoader(!1)})}initControls(){this.searchForm.controls.search.valueChanges.subscribe(i=>{i?.length>0?(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.filterChapters(i)},500)):this.filteredItems.length!=this.initialItems.length&&(this.filteredItems=this.initialItems)})}filterChapters(i){let n=[];i.includes(this.prevSearchString)?n=this.filteredItems:n=this.initialItems,this.filteredItems=n?.filter(r=>r.text.includes(i)),this.prevSearchString=i}};o.\u0275fac=function(n){return new(n||o)(s(k),s(z))},o.\u0275cmp=C({type:o,selectors:[["chapters-items"]],inputs:{gameName:"gameName"},standalone:!0,features:[A],decls:8,vars:4,consts:[[1,"search-items"],[1,"items-list_filter-field",3,"formGroup"],[3,"formControlName","tuiTextfieldIcon","tuiTextfieldCleaner"],["tuiTextfield",""],[1,"search-items-grid"],[3,"routerLink"],["appearance","custom","tuiButton","","type","button",1,"items-list_item-button"]],template:function(n,r){n&1&&(d(0,"div",0)(1,"form",1)(2,"tui-input",2),O(3," Search for text in scenarios "),D(4,"input",3),c()(),d(5,"div",4),W(6,Li,4,2,"div",null,U),c()()),n&2&&(a(),l("formGroup",r.searchForm),a(),l("formControlName","search")("tuiTextfieldIcon","tuiIconSearchLarge")("tuiTextfieldCleaner",!0),a(4),Q(r.filteredItems))},dependencies:[ve,me,le,de,ge,fe,he,Fe,we,Se,Me,Te,Ce,Ie,be,ye,_e],encapsulation:2});let e=o;return e})();var Ri=e=>({spoiler:e});function Ai(e,o){if(e&1&&(d(0,"div",13)(1,"a",14)(2,"button",15),O(3),c()()()),e&2){let t=o.$implicit;a(),l("routerLink",t.routerLink),a(2),Y(" ",t.name," ")}}function ji(e,o){if(e&1&&(d(0,"div",11)(1,"h2",12),O(2),c(),W(3,Ai,4,2,"div",13,U),c()),e&2){let t=I(),i=t.$implicit,n=t.$index,r=I();G("item_active",n===r.index+1),a(),l("ngClass",Ve(4,Ri,i.spoiler)),a(),Ct(i.name),a(),Q(i.items)}}function ki(e,o){e&1&&T(0,ji,5,6,"div",10)}var Ci=(()=>{let o=class o{get index(){return this._index}set index(i){this._index=i}constructor(i,n,r){this.globalLoaderService=i,this.restApi=n,this.cdr=r,this._index=0,this.carouselCount=Math.ceil(window.innerWidth/500),this.searchForm=new ce({search:new pe("")}),this.timeout=null,this.prevSearchString=""}ngOnInit(){this.initControls(),this.restApi.get("gameRouteConfig",{pathParams:{gameName:this.gameName}}).pipe(b(i=>{this.initialItems=i.items.map(r=>({name:r.name,spoiler:r.spoiler,items:[]}));let n=i.items.map(r=>this.restApi.get("routedGameChapterConfig",{pathParams:{gameName:this.gameName,routeName:r.routerLink}}));return N(n).pipe(b(r=>{let m=this.getMappedRouteConfig(r,i);return N(m)}))})).subscribe(i=>{Object.entries(i).forEach((r,m)=>{this.initialItems[m].items=r[1]}),this.filteredItems=this.initialItems;let n=Math.ceil(window.innerWidth/500);this.carouselCount=Math.max(Math.min(n,this.filteredItems?.length),1),this.globalLoaderService.setGlobalLoader(!1)})}getMappedRouteConfig(i,n){return n.items.map((u,p)=>[u,i[p]]).reduce((u,p)=>{let M=p[0],x=p[1],Ee=M.routerLink,Ii=N(Array.from({length:x.total}).map((Ke,Z)=>{let V="";return x.chapterOrder?V=x.chapterOrder[Z]:V=`${Z+1}`,this.restApi.get("routedChapterFile",{pathParams:{gameName:this.gameName,routeName:Ee,file:`${V}.txt`},requestOptions:{headers:new ue({Accept:"application/json;charset=utf-8"}),responseType:"text"}})})).pipe(b(Ke=>{let Z=Ke.map((V,X)=>{let Ne="",Pe="";return x.chapterOrder?(Ne=x.chapterOrder[X],Pe=B.resolveChapterName(x,X)):(Ne=`${X+1}`,Pe=B.resolveChapterName(x,X+1)),{name:Pe,text:V,routerLink:`../routes/${Ee}/${Ne}`}});return Le(Z)}));return et(Je({},u),{[Ee]:Ii})},{})}onResize(){let i=Math.ceil(window.innerWidth/500);this.carouselCount=Math.max(Math.min(i,this.filteredItems?.length),1)}initControls(){this.searchForm.controls.search.valueChanges.subscribe(i=>{i.length>0?(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.filterChapters(i),this.onResize(),this._index=0},500)):this.filteredItems&&this.initialItems&&this.filteredItems.length!=this.initialItems.length&&(this.filteredItems=this.initialItems,this.onResize())})}filterChapters(i){let n=[];i.includes(this.prevSearchString)?n=this.filteredItems:n=this.initialItems,this.filteredItems=n.map(r=>({items:r.items.filter(u=>u.text.includes(i)),name:r.name,spoiler:r.spoiler})).filter(r=>r.items.length>0),this.prevSearchString=i,this.globalLoaderService.setGlobalLoader(!1)}};o.\u0275fac=function(n){return new(n||o)(s(k),s(z),s(j))},o.\u0275cmp=C({type:o,selectors:[["routed-items"]],hostBindings:function(n,r){n&1&&g("resize",function(u){return r.onResize(u)},!1,vt)},inputs:{gameName:"gameName"},standalone:!0,features:[A],decls:12,vars:7,consts:[["carousel",""],[1,"search-items"],[1,"items-list_filter-field",3,"formGroup"],[3,"formControlName","tuiTextfieldIcon","tuiTextfieldCleaner"],["tuiTextfield",""],[1,"search-routes"],["icon","tuiIconChevronLeftLarge","title","Previous","tuiIconButton","","appearance","custom","type","button",1,"search_navigation-button","left",3,"click"],[3,"indexChange","draggable","itemsCount","index"],["alt","","draggable","false",1,"search-route-item","item",3,"item_active"],["icon","tuiIconChevronRightLarge","title","Next","tuiIconButton","","appearance","custom","type","button",1,"search_navigation-button","right",3,"click"],["class","search-route-item item","alt","","draggable","false",3,"item_active",4,"tuiItem"],["alt","","draggable","false",1,"search-route-item","item"],[3,"ngClass"],[1,"search-route-chapters"],[3,"routerLink"],["appearance","custom","tuiButton","","type","button",1,"items-list_item-button"]],template:function(n,r){if(n&1){let m=te();d(0,"div",1)(1,"form",2)(2,"tui-input",3),O(3," Search for text in scenarios "),D(4,"input",4),c()(),d(5,"div",5)(6,"button",6),g("click",function(){P(m);let p=ne(8);return L(p.prev())}),c(),d(7,"tui-carousel",7,0),se("indexChange",function(p){return P(m),re(r.index,p)||(r.index=p),L(p)}),W(9,ki,1,0,"div",8,U),c(),d(11,"button",9),g("click",function(){P(m);let p=ne(8);return L(p.next())}),c()()()}n&2&&(a(),l("formGroup",r.searchForm),a(),l("formControlName","search")("tuiTextfieldIcon","tuiIconSearchLarge")("tuiTextfieldCleaner",!0),a(5),l("draggable",!0)("itemsCount",r.carouselCount),oe("index",r.index),a(2),Q(r.filteredItems))},dependencies:[It,_e,ve,me,le,de,ge,fe,he,fi,mi,Xe,xe,Fe,we,Se,Me,Te,Ce,Ie,be,ye],encapsulation:2});let e=o;return e})();function Hi(e,o){if(e&1&&D(0,"routed-items",2),e&2){let t=I(2);l("gameName",t.gameName)}}function zi(e,o){if(e&1&&D(0,"chapters-items",2),e&2){let t=I(2);l("gameName",t.gameName)}}function Bi(e,o){if(e&1&&(d(0,"div",1),T(1,Hi,1,1,"routed-items",2)(2,zi,1,1),c()),e&2){let t=I();a(),ke(1,t._routed?1:2)}}var xo=(()=>{let o=class o{constructor(i,n,r,m){this.route=i,this.restApi=n,this.gameRootService=r,this.globalLoader=m,this._routed=!1}ngOnInit(){window.scroll(0,0),this.gameRootService.pushHeader("Search"),this.route.parent?.paramMap.pipe(J(()=>{this.loaded=!1,this.globalLoader.setGlobalLoader(!0)}),b(i=>(this.gameName=i.get("gameName")||"",this.restApi.get("searchConfig",{pathParams:{gameName:this.gameName}})))).subscribe(i=>{this._routed=i.routed,this.loaded=!0})}};o.\u0275fac=function(n){return new(n||o)(s(Wt),s(z),s(Kt),s(k))},o.\u0275cmp=C({type:o,selectors:[["app-search"]],standalone:!0,features:[A],decls:2,vars:1,consts:[[1,"search_root"],[1,"search_body"],[3,"gameName"]],template:function(n,r){n&1&&(d(0,"div",0),T(1,Bi,3,1,"div",1),c()),n&2&&(a(),ke(1,r.loaded?1:-1))},dependencies:[_i,Ci],encapsulation:2});let e=o;return e})();export{xo as SearchComponent};
