import{a as Qt,b as ge,c as _e,d as qt,e as Ce,f as ye,g as Yt,h as be,i as Zt,j as De,k as Xt}from"./chunk-CRHUP7PS.js";import"./chunk-YPJUEPRX.js";import"./chunk-W66C6N3I.js";import{a as Ye}from"./chunk-LIG3KEFC.js";import"./chunk-YPHX7PC4.js";import{a as H}from"./chunk-S77TKC5Z.js";import{a as Kt}from"./chunk-BPDZKKEV.js";import"./chunk-3LROMLBA.js";import{a as j}from"./chunk-TFAWTYLP.js";import{a as Ie,b as Te}from"./chunk-5TNR2OTO.js";import"./chunk-UEBDUWVO.js";import{d as zt,e as Bt}from"./chunk-WNPWYFNT.js";import{$ as C,$a as W,Ab as Dt,Ae as Wt,Bb as Mt,Bd as Qe,Cb as re,Cd as qe,Da as x,De as ve,Ea as T,Eb as se,Ed as At,Fa as Ae,Fd as jt,Ga as l,Gd as kt,H as ut,Ha as _t,Hc as St,Ia as $,Jc as k,Ka as je,Kc as Ft,L as b,La as V,Ma as G,Md as Ht,Na as U,Nb as Ot,O as X,Oa as d,P as lt,Pa as c,Pb as xt,Qa as D,Qb as ae,R as dt,Rb as ue,S as h,Sb as le,T as B,Ta as ke,Tb as de,U as Le,Ua as J,Ud as $t,V as ct,Vb as ce,Vc as Et,W as pt,X as mt,Xa as g,Xb as pe,Ya as I,Yb as me,Za as He,Zb as fe,_a as ee,_b as he,_c as Nt,a as Je,aa as v,ab as ze,b as et,ba as f,bb as w,cb as S,db as te,e as tt,eb as M,f as Z,fa as N,fb as Ct,ga as P,gb as Q,gc as Ge,h as it,hb as ie,hc as Ue,ia as ft,ib as ne,ja as Re,jb as oe,jc as wt,k as nt,kb as _,l as Pe,la as L,lb as R,ma as ht,n as F,nb as Be,nc as We,o as ot,od as Pt,oe as Vt,pb as $e,qb as Ve,r as E,rd as Lt,ta as vt,tb as A,u as rt,ua as gt,ud as Rt,v as st,va as u,vb as It,ve as Gt,wa as s,x as at,xb as Tt,xe as Ut,ya as K,yb as yt,zb as bt}from"./chunk-VIQ542NQ.js";var Me=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=f({type:e,selectors:[["","tuiItem",""]]}),e})(),Jt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v({type:e}),e.\u0275inj=h({}),e})();var ei=(()=>{class e{constructor(t){this.tuiPan=t}}return e.\u0275fac=function(t){return new(t||e)(s(Qe))},e.\u0275dir=f({type:e,selectors:[["","tuiPan",""]],outputs:{tuiPan:"tuiPan"},features:[_([Qe])]}),e})(),ti=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v({type:e}),e.\u0275inj=h({}),e})();var ii=(()=>{class e{constructor(t){this.tuiSwipe=t}}return e.\u0275fac=function(t){return new(t||e)(s(qe))},e.\u0275dir=f({type:e,selectors:[["","tuiSwipe",""]],outputs:{tuiSwipe:"tuiSwipe"},features:[_([qe])]}),e})(),ni=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v({type:e}),e.\u0275inj=h({}),e})();var oi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=f({type:e,selectors:[["ng-template","tuiDataList",""]]}),e})();var Ti=new B("Root element for IntersectionObserver"),si="0px 0px 0px 0px",ln=new B("rootMargin for IntersectionObserver",{providedIn:"root",factory:()=>si});function yi(e){return e||si}var ai=0,dn=new B("threshold for IntersectionObserver",{providedIn:"root",factory:()=>ai});function bi(e){return e?.split(",").map(parseFloat)||ai}var Di=typeof IntersectionObserver<"u"?IntersectionObserver:class{constructor(){this.root=null,this.rootMargin="",this.thresholds=[]}observe(){}unobserve(){}disconnect(){}takeRecords(){return[]}},Ze=(()=>{class e extends Di{constructor(t,i,n){super(r=>{this.callbacks.forEach((p,a)=>{let m=r.filter(({target:Se})=>Se===a);return m.length&&p(m,this)})},{root:t&&t.nativeElement,rootMargin:yi(i),threshold:bi(n)}),this.callbacks=new Map}observe(t,i=()=>{}){super.observe(t),this.callbacks.set(t,i)}unobserve(t){super.unobserve(t),this.callbacks.delete(t)}ngOnDestroy(){this.disconnect()}}return e.\u0275fac=function(t){return new(t||e)(s(Ti,8),Re("waIntersectionRootMargin"),Re("waIntersectionThreshold"))},e.\u0275dir=f({type:e,selectors:[["","waIntersectionObserver",""]],exportAs:["IntersectionObserver"],features:[x]}),e})(),ri=(()=>{class e extends Z{constructor({nativeElement:t},i){return super(n=>(i.observe(t,r=>{n.next(r)}),()=>{i.unobserve(t)})),this.pipe(ut())}}return e.\u0275fac=function(t){return new(t||e)(Le(L),Le(Ze))},e.\u0275prov=dt({token:e,factory:e.\u0275fac}),e})(),ui=(()=>{class e{constructor(t){this.waIntersectionObservee=t}}return e.\u0275fac=function(t){return new(t||e)(s(ri))},e.\u0275dir=f({type:e,selectors:[["","waIntersectionObservee",""]],outputs:{waIntersectionObservee:"waIntersectionObservee"},features:[_([ri])]}),e})();var li=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v({type:e}),e.\u0275inj=h({}),e})(),cn=new B("Intersection Observer API support",{providedIn:"root",factory:()=>!!ct(Et).IntersectionObserver});var di=Qt({limitWidth:"fixed",align:"right"}),ci={provide:Ut,deps:[[new pt,new mt,Ot]],useFactory:tt};function Oi(e,o){e&1&&ke(0)}function xi(e,o){if(e&1){let t=J();d(0,"fieldset",5),g("waIntersectionObservee",function(n){let r=N(t).index,p=I();return P(p.onIntersection(n[0],r))}),ke(1,6),c()}if(e&2){let t=o.$implicit,i=o.index,n=I();l("disabled",n.isDisabled(i))("ngStyle",n.getStyle(n.itemsCount)),u(),l("ngTemplateOutlet",t)}}var wi=(()=>{class e{constructor(t){this.el=t,this.tuiCarouselScroll=k(this.el.nativeElement,"wheel").pipe(at(({deltaX:i})=>Math.abs(i)>20),lt(500),F(({deltaX:i})=>Math.sign(i)),X(()=>{this.el.nativeElement.scrollLeft=10}))}}return e.\u0275fac=function(t){return new(t||e)(s(L))},e.\u0275dir=f({type:e,selectors:[["","tuiCarouselScroll",""]],outputs:{tuiCarouselScroll:"tuiCarouselScroll"}}),e})(),Xe=(()=>{class e extends Z{constructor(t,i){super(n=>this.output$.subscribe(n)),this.el=t,this.visible$=i,this.duration$=new it(0),this.running$=st(k(this.el.nativeElement,"mouseenter").pipe(F(Ge)),k(this.el.nativeElement,"touchstart").pipe(F(Ge)),k(this.el.nativeElement,"touchend").pipe(F(Ue)),k(this.el.nativeElement,"mouseleave").pipe(F(Ue)),this.visible$),this.output$=ot([this.duration$,this.running$]).pipe(Ft(([n])=>rt(n),n=>n.every(Boolean)))}set duration(t){this.duration$.next(t)}set index(t){this.duration$.next(this.duration$.value)}}return e.\u0275fac=function(t){return new(t||e)(s(L),s(Nt))},e.\u0275dir=f({type:e,selectors:[["tui-carousel"]],inputs:{duration:"duration",index:"index"},features:[x]}),e})(),Si=(()=>{class e{constructor(t){this.tuiCarouselAutoscroll=t}}return e.\u0275fac=function(t){return new(t||e)(s(Xe))},e.\u0275dir=f({type:e,selectors:[["","tuiCarouselAutoscroll",""]],outputs:{tuiCarouselAutoscroll:"tuiCarouselAutoscroll"}}),e})(),mi=(()=>{class e{constructor(t,i,n){this.cdr=t,this.el=i,this.isMobile=n,this.translate=0,this.draggable=!1,this.itemsCount=1,this.index=0,this.indexChange=new ht,this.items=wt,this.transitioned=!0}get transform(){return`translateX(${100*(this.transitioned?this.computedTranslate:this.translate)}%)`}onTransitioned(t){this.transitioned=t,t||(this.translate=this.computedTranslate)}getStyle(t){let i=`${100/t}%`;return{flexBasis:i,minWidth:i,maxWidth:i}}next(){this.items&&this.index===this.items.length-this.itemsCount||this.updateIndex(this.index+1)}prev(){this.updateIndex(this.index-1)}isDisabled(t){return t<this.index||t>this.index+this.itemsCount}onIntersection({intersectionRatio:t},i){t&&t>=.5&&!this.transitioned&&this.updateIndex(this.index<i?i-this.itemsCount+1:i)}onScroll(t){this.isMobile||(t>0?this.next():this.prev())}onPan(t){if(!this.computedDraggable)return;let{clientWidth:i}=this.el.nativeElement,n=1-this.items.length/this.itemsCount;this.translate=We(t/i+this.translate,n,0)}onSwipe(t){t==="left"?this.next():t==="right"&&this.prev()}onAutoscroll(){this.updateIndex(this.index===this.items.length-1?0:this.index+1)}get computedTranslate(){return-this.index/this.itemsCount}get computedDraggable(){return this.isMobile||this.draggable}updateIndex(t){this.index=We(t,0,this.items.length-1),this.indexChange.emit(this.index),this.cdr.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(s(A),s(L),s(Lt))},e.\u0275cmp=C({type:e,selectors:[["tui-carousel"]],contentQueries:function(t,i,n){if(t&1&&W(n,Me,4,K),t&2){let r;w(r=S())&&(i.items=r)}},hostVars:4,hostBindings:function(t,i){t&1&&g("touchstart",function(){return i.onTransitioned(!1)})("touchend",function(){return i.onTransitioned(!0)})("mousedown",function(){return i.onTransitioned(!1)})("mouseup.silent",function(){return i.onTransitioned(!0)},!1,gt),t&2&&$("_draggable",i.draggable)("_transitioned",i.transitioned)},inputs:{draggable:"draggable",itemsCount:"itemsCount",index:"index"},outputs:{indexChange:"indexChange"},features:[_([{provide:Rt,useValue:{timeout:200,threshold:30}}])],decls:6,vars:6,consts:[[4,"ngIf"],[1,"t-scroller",3,"tuiCarouselScroll"],["waIntersectionObserver","","waIntersectionThreshold","0.5",1,"t-wrapper"],[1,"t-items",3,"tuiCarouselAutoscroll","tuiPan","tuiSwipe"],["class","t-item",3,"disabled","ngStyle","waIntersectionObservee",4,"ngFor","ngForOf"],[1,"t-item",3,"waIntersectionObservee","disabled","ngStyle"],[3,"ngTemplateOutlet"]],template:function(t,i){t&1&&(T(0,Oi,1,0,"ng-container",0),$e(1,"async"),d(2,"div",1),g("tuiCarouselScroll",function(r){return i.onScroll(r)}),d(3,"div",2)(4,"div",3),g("tuiCarouselAutoscroll",function(){return i.onAutoscroll()})("tuiPan",function(r){return i.onPan(r[0])})("tuiSwipe",function(r){return i.onSwipe(r.direction)}),T(5,xi,2,3,"fieldset",4),c()()()),t&2&&(l("ngIf",Ve(1,4,i.items.changes)),u(4),_t("transform",i.transform),u(),l("ngForOf",i.items))},dependencies:[yt,wi,Ze,Si,ei,ii,Tt,bt,ui,Dt,Mt],styles:['[_nghost-%COMP%]{position:relative;display:block;overflow:hidden}._draggable[_nghost-%COMP%]{-webkit-user-select:none;-moz-user-select:none;user-select:none}._draggable[_nghost-%COMP%]:hover{cursor:grab}._draggable[_nghost-%COMP%]:active{cursor:grabbing}.t-items[_ngcontent-%COMP%]{display:flex}._transitioned[_nghost-%COMP%]   .t-items[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:var(--tui-carousel-padding, 0 1.25rem);flex:1;min-width:100%;max-width:100%;box-sizing:border-box;border:none;margin:0}.t-wrapper[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;left:0;right:0;min-width:100%;overflow:hidden}.t-scroller[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;overflow:auto;overscroll-behavior-x:none;touch-action:none}.t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar, .t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{display:none}.t-scroller[_ngcontent-%COMP%]:before, .t-scroller[_ngcontent-%COMP%]:after{content:"";display:block;min-width:1rem}'],changeDetection:0}),nt([Ht],e.prototype,"getStyle",null),e})();var fi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v({type:e}),e.\u0275inj=h({imports:[[re,li,ti,ni,Jt]]}),e})();var Fi=["*",[["input"]]],Ei=["*","input"],Oe=(()=>{class e extends jt{constructor(t,i,n,r){super(t,i,r),this.textfieldSize=n,this.open=!1}get size(){return this.textfieldSize.size}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return St(this.nativeFocusableElement)||!!this.hostedDropdown&&this.hostedDropdown.focused}get canOpen(){return this.interactive&&!!this.datalist}onValueChange(t){this.value=t,this.open=!0}onActiveZone(t){this.updateFocused(t)}handleOption(t){this.setNativeValue(String(t)),this.focusInput(),this.value=String(t),this.open=!1}getFallbackValue(){return""}focusInput(t=!1){this.nativeFocusableElement&&this.nativeFocusableElement.focus({preventScroll:t})}setNativeValue(t){this.nativeFocusableElement&&(this.nativeFocusableElement.value=t)}}return e.\u0275fac=function(t){return new(t||e)(s(xt,10),s(A),s(qt),s(At,8))},e.\u0275cmp=C({type:e,selectors:[["tui-input"]],contentQueries:function(t,i,n){if(t&1&&W(n,oi,5,K),t&2){let r;w(r=S())&&(i.datalist=r.first)}},viewQuery:function(t,i){if(t&1&&(ze(ye,5),ze(be,5)),t&2){let n;w(n=S())&&(i.hostedDropdown=n.first),w(n=S())&&(i.textfield=n.first)}},hostVars:1,hostBindings:function(t,i){t&2&&Ae("data-size",i.size)},features:[_([ci,Pt(e),Vt(e),kt(e)],[di]),x],ngContentSelectors:Ei,decls:4,vars:11,consts:[[1,"t-hosted",3,"openChange","tuiActiveZoneChange","canOpen","content","open"],["automation-id","tui-input__textfield",1,"t-textfield",3,"valueChange","disabled","focusable","invalid","nativeId","pseudoFocus","pseudoHover","readOnly","value"]],template:function(t,i){t&1&&(He(Fi),d(0,"tui-hosted-dropdown",0),oe("openChange",function(r){return ne(i.open,r)||(i.open=r),r}),g("tuiActiveZoneChange",function(r){return i.onActiveZone(r)}),d(1,"tui-primitive-textfield",1),g("valueChange",function(r){return i.onValueChange(r)}),ee(2),ee(3,1,["ngProjectAs","input",5,["input"]]),c()()),t&2&&(l("canOpen",i.canOpen)("content",i.datalist||""),ie("open",i.open),u(),l("disabled",i.computedDisabled)("focusable",i.computedFocusable)("invalid",i.computedInvalid)("nativeId",i.nativeId)("pseudoFocus",i.computedFocused)("pseudoHover",i.pseudoHover)("readOnly",i.readOnly)("value",i.value))},dependencies:[ye,be,zt,Zt],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),e})(),xe=(()=>{class e extends $t{onValueChange(t){this.host.onValueChange(t)}}return e.\u0275fac=(()=>{let o;return function(i){return(o||(o=ft(e)))(i||e)}})(),e.\u0275dir=f({type:e,selectors:[["tui-input"]],features:[_([Gt(e)]),x]}),e})(),we=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v({type:e}),e.\u0275inj=h({imports:[[re,Bt,Xt,Yt]]}),e})();function Li(e,o){if(e&1&&(d(0,"div")(1,"a",5)(2,"button",6),M(3),c()()()),e&2){let t=o.$implicit;u(),l("routerLink",t.routerLink),u(2),Q(" ",t.name,"")}}var _i=(()=>{let o=class o{constructor(i,n){this.globalLoaderService=i,this.restApi=n,this.filteredItems=[],this.searchForm=new le({search:new de("")}),this.timeout=null,this.initialItems=[],this.prevSearchString=""}ngOnInit(){this.initControls(),this.restApi.get("nonRoutedGameChapterConfig",{pathParams:{gameName:this.gameName}}).pipe(b(i=>{let n=i.total,r=Object.values(i.chapters).some(a=>!!a.name),p=[];this.initialItems=new Array(n);for(let a=0;a<n;a++){if(this.initialItems[a]={},r){let m=i.chapters[`${a+1}`];this.initialItems[a].name=m?.name||`Chapter ${a+1}`}else this.initialItems[a].name=`Chapter ${a+1}`;this.initialItems[a].routerLink=`../chapters/${a+1}`,p.push(this.restApi.get("nonRoutedChapterFile",{pathParams:{gameName:this.gameName,file:`${a+1}.txt`},requestOptions:{headers:new se({Accept:"application/json;charset=utf-8"}),responseType:"text"}}))}return E(p)})).subscribe(i=>{i.forEach((n,r)=>{this.initialItems[r].text=n}),this.filteredItems=this.initialItems,this.globalLoaderService.setGlobalLoader(!1)})}initControls(){this.searchForm.controls.search.valueChanges.subscribe(i=>{i?.length>0?(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.filterChapters(i)},500)):this.filteredItems.length!=this.initialItems.length&&(this.filteredItems=this.initialItems)})}filterChapters(i){let n=[];i.includes(this.prevSearchString)?n=this.filteredItems:n=this.initialItems,this.filteredItems=n?.filter(r=>r.text.includes(i)),this.prevSearchString=i}};o.\u0275fac=function(n){return new(n||o)(s(j),s(H))},o.\u0275cmp=C({type:o,selectors:[["chapters-items"]],inputs:{gameName:"gameName"},standalone:!0,features:[R],decls:8,vars:4,consts:[[1,"search-items"],[1,"items-list_filter-field",3,"formGroup"],[3,"formControlName","tuiTextfieldIcon","tuiTextfieldCleaner"],["tuiTextfield",""],[1,"search-items-grid"],[3,"routerLink"],["appearance","custom","tuiButton","","type","button",1,"items-list_item-button"]],template:function(n,r){n&1&&(d(0,"div",0)(1,"form",1)(2,"tui-input",2),M(3," Search for text in scenarios "),D(4,"input",3),c()(),d(5,"div",4),G(6,Li,4,2,"div",null,V),c()()),n&2&&(u(),l("formGroup",r.searchForm),u(),l("formControlName","search")("tuiTextfieldIcon","tuiIconSearchLarge")("tuiTextfieldCleaner",!0),u(4),U(r.filteredItems))},dependencies:[fe,ce,ae,ue,he,pe,me,we,Oe,xe,De,Ce,ge,_e,Te,Ie,ve],encapsulation:2});let e=o;return e})();var Ri=e=>({spoiler:e});function Ai(e,o){if(e&1&&(d(0,"div",13)(1,"a",14)(2,"button",15),M(3),c()()()),e&2){let t=o.$implicit;u(),l("routerLink",t.routerLink),u(2),Q(" ",t.name," ")}}function ji(e,o){if(e&1&&(d(0,"div",11)(1,"h2",12),M(2),c(),G(3,Ai,4,2,"div",13,V),c()),e&2){let t=I(),i=t.$implicit,n=t.$index,r=I();$("item_active",n===r.index+1),u(),l("ngClass",Be(4,Ri,i.spoiler)),u(),Ct(i.name),u(),U(i.items)}}function ki(e,o){e&1&&T(0,ji,5,6,"div",10)}var Ci=(()=>{let o=class o{get index(){return this._index}set index(i){this._index=i}constructor(i,n,r){this.globalLoaderService=i,this.restApi=n,this.cdr=r,this._index=0,this.carouselCount=Math.ceil(window.innerWidth/500),this.searchForm=new le({search:new de("")}),this.timeout=null,this.prevSearchString=""}ngOnInit(){this.initControls(),this.restApi.get("gameRouteConfig",{pathParams:{gameName:this.gameName}}).pipe(b(i=>{this.initialItems=i.items.map(r=>({name:r.name,spoiler:r.spoiler,items:[]}));let n=i.items.map(r=>this.restApi.get("routedGameChapterConfig",{pathParams:{gameName:this.gameName,routeName:r.routerLink}}));return E(n).pipe(b(r=>{let p=this.getMappedRouteConfig(r,i);return E(p)}))})).subscribe(i=>{Object.entries(i).forEach((r,p)=>{this.initialItems[p].items=r[1]}),this.filteredItems=this.initialItems;let n=Math.ceil(window.innerWidth/500);this.carouselCount=Math.max(Math.min(n,this.filteredItems?.length),1),this.globalLoaderService.setGlobalLoader(!1)})}getMappedRouteConfig(i,n){return n.items.map((a,m)=>[a,i[m]]).reduce((a,m)=>{let Se=m[0],O=m[1],Fe=Se.routerLink,Ii=E(Array.from({length:O.total}).map((Ke,q)=>{let z="";return O.chapterOrder?z=O.chapterOrder[q]:z=`${q+1}`,this.restApi.get("routedChapterFile",{pathParams:{gameName:this.gameName,routeName:Fe,file:`${z}.txt`},requestOptions:{headers:new se({Accept:"application/json;charset=utf-8"}),responseType:"text"}})})).pipe(b(Ke=>{let q=Ke.map((z,Y)=>{let Ee="",Ne="";return O.chapterOrder?(Ee=O.chapterOrder[Y],Ne=Ye.resolveChapterName(O,Y)):(Ee=`${Y+1}`,Ne=Ye.resolveChapterName(O,Y+1)),{name:Ne,text:z,routerLink:`../routes/${Fe}/${Ee}`}});return Pe(q)}));return et(Je({},a),{[Fe]:Ii})},{})}onResize(){let i=Math.ceil(window.innerWidth/500);this.carouselCount=Math.max(Math.min(i,this.filteredItems?.length),1)}initControls(){this.searchForm.controls.search.valueChanges.subscribe(i=>{i.length>0?(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.filterChapters(i),this.onResize(),this._index=0},500)):this.filteredItems&&this.initialItems&&this.filteredItems.length!=this.initialItems.length&&(this.filteredItems=this.initialItems,this.onResize())})}filterChapters(i){let n=[];i.includes(this.prevSearchString)?n=this.filteredItems:n=this.initialItems,this.filteredItems=n.map(r=>({items:r.items.filter(a=>a.text.includes(i)),name:r.name,spoiler:r.spoiler})).filter(r=>r.items.length>0),this.prevSearchString=i,this.globalLoaderService.setGlobalLoader(!1)}};o.\u0275fac=function(n){return new(n||o)(s(j),s(H),s(A))},o.\u0275cmp=C({type:o,selectors:[["routed-items"]],hostBindings:function(n,r){n&1&&g("resize",function(a){return r.onResize(a)},!1,vt)},inputs:{gameName:"gameName"},standalone:!0,features:[R],decls:12,vars:7,consts:[["carousel",""],[1,"search-items"],[1,"items-list_filter-field",3,"formGroup"],[3,"formControlName","tuiTextfieldIcon","tuiTextfieldCleaner"],["tuiTextfield",""],[1,"search-routes"],["icon","tuiIconChevronLeftLarge","title","Previous","tuiIconButton","","appearance","custom","type","button",1,"search_navigation-button","left",3,"click"],[3,"indexChange","draggable","itemsCount","index"],["alt","","draggable","false",1,"search-route-item","item",3,"item_active"],["icon","tuiIconChevronRightLarge","title","Next","tuiIconButton","","appearance","custom","type","button",1,"search_navigation-button","right",3,"click"],["class","search-route-item item","alt","","draggable","false",3,"item_active",4,"tuiItem"],["alt","","draggable","false",1,"search-route-item","item"],[3,"ngClass"],[1,"search-route-chapters"],[3,"routerLink"],["appearance","custom","tuiButton","","type","button",1,"items-list_item-button"]],template:function(n,r){if(n&1){let p=J();d(0,"div",1)(1,"form",2)(2,"tui-input",3),M(3," Search for text in scenarios "),D(4,"input",4),c()(),d(5,"div",5)(6,"button",6),g("click",function(){N(p);let m=te(8);return P(m.prev())}),c(),d(7,"tui-carousel",7,0),oe("indexChange",function(m){return N(p),ne(r.index,m)||(r.index=m),P(m)}),G(9,ki,1,0,"div",8,V),c(),d(11,"button",9),g("click",function(){N(p);let m=te(8);return P(m.next())}),c()()()}n&2&&(u(),l("formGroup",r.searchForm),u(),l("formControlName","search")("tuiTextfieldIcon","tuiIconSearchLarge")("tuiTextfieldCleaner",!0),u(5),l("draggable",!0)("itemsCount",r.carouselCount),ie("index",r.index),u(2),U(r.filteredItems))},dependencies:[It,ve,fe,ce,ae,ue,he,pe,me,fi,mi,Xe,Me,we,Oe,xe,De,Ce,ge,_e,Te,Ie],encapsulation:2});let e=o;return e})();function Hi(e,o){if(e&1&&D(0,"routed-items",2),e&2){let t=I(2);l("gameName",t.gameName)}}function zi(e,o){if(e&1&&D(0,"chapters-items",2),e&2){let t=I(2);l("gameName",t.gameName)}}function Bi(e,o){if(e&1&&(d(0,"div",1),T(1,Hi,1,1,"routed-items",2)(2,zi,1,1),c()),e&2){let t=I();u(),je(1,t._routed?1:2)}}var Oo=(()=>{let o=class o{constructor(i,n,r,p){this.route=i,this.restApi=n,this.gameRootService=r,this.globalLoader=p,this._routed=!1}ngOnInit(){window.scroll(0,0),this.gameRootService.pushHeader("Search"),this.route.parent?.paramMap.pipe(X(()=>{this.loaded=!1,this.globalLoader.setGlobalLoader(!0)}),b(i=>(this.gameName=i.get("gameName")||"",this.restApi.get("searchConfig",{pathParams:{gameName:this.gameName}})))).subscribe(i=>{this._routed=i.routed,this.loaded=!0})}};o.\u0275fac=function(n){return new(n||o)(s(Wt),s(H),s(Kt),s(j))},o.\u0275cmp=C({type:o,selectors:[["app-search"]],standalone:!0,features:[R],decls:2,vars:1,consts:[[1,"search_root"],[1,"search_body"],[3,"gameName"]],template:function(n,r){n&1&&(d(0,"div",0),T(1,Bi,3,1,"div",1),c()),n&2&&(u(),je(1,r.loaded?1:-1))},dependencies:[_i,Ci],encapsulation:2});let e=o;return e})();export{Oo as SearchComponent};
